

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>krait.websockets module &mdash; Krait 0.5 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Krait 0.5 documentation" href="index.html"/>
        <link rel="up" title="krait package" href="krait.html"/>
        <link rel="next" title="Modules" href="modules.html"/>
        <link rel="prev" title="krait.mvc module" href="krait.mvc.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Krait
          

          
          </a>

          
            
            
              <div class="version">
                0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="krait.html">krait package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="krait.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="krait.config.html">krait.config module</a></li>
<li class="toctree-l3"><a class="reference internal" href="krait.cookie.html">krait.cookie module</a></li>
<li class="toctree-l3"><a class="reference internal" href="krait.http_request.html">krait.http_request module</a></li>
<li class="toctree-l3"><a class="reference internal" href="krait.http_response.html">krait.http_response module</a></li>
<li class="toctree-l3"><a class="reference internal" href="krait.krait_utils.html">krait.krait_utils module</a></li>
<li class="toctree-l3"><a class="reference internal" href="krait.mvc.html">krait.mvc module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">krait.websockets module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="krait.html#module-krait">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="krait.html">krait package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="krait.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="krait.config.html">krait.config module</a></li>
<li class="toctree-l4"><a class="reference internal" href="krait.cookie.html">krait.cookie module</a></li>
<li class="toctree-l4"><a class="reference internal" href="krait.http_request.html">krait.http_request module</a></li>
<li class="toctree-l4"><a class="reference internal" href="krait.http_response.html">krait.http_response module</a></li>
<li class="toctree-l4"><a class="reference internal" href="krait.krait_utils.html">krait.krait_utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="krait.mvc.html">krait.mvc module</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">krait.websockets module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="krait.html#module-krait">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Krait</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="krait.html">krait package</a> &raquo;</li>
        
      <li>krait.websockets module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/krait.websockets.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-krait.websockets">
<span id="krait-websockets-module"></span><h1>krait.websockets module<a class="headerlink" href="#module-krait.websockets" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="krait.websockets.WebsocketsRequest">
<em class="property">class </em><code class="descclassname">krait.websockets.</code><code class="descname">WebsocketsRequest</code><span class="sig-paren">(</span><em>http_request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/krait/websockets.html#WebsocketsRequest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#krait.websockets.WebsocketsRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Represents a Websockets request.
Contains additional information extracted from a Upgrade: websocket request.</p>
<dl class="staticmethod">
<dt id="krait.websockets.WebsocketsRequest.extract_protocols">
<em class="property">static </em><code class="descname">extract_protocols</code><span class="sig-paren">(</span><em>http_request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/krait/websockets.html#WebsocketsRequest.extract_protocols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#krait.websockets.WebsocketsRequest.extract_protocols" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="krait.websockets.WebsocketsResponse">
<em class="property">class </em><code class="descclassname">krait.websockets.</code><code class="descname">WebsocketsResponse</code><span class="sig-paren">(</span><em>controller</em>, <em>protocol=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/krait/websockets.html#WebsocketsResponse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#krait.websockets.WebsocketsResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="class">
<dt id="krait.websockets.WebsocketsCtrlBase">
<em class="property">class </em><code class="descclassname">krait.websockets.</code><code class="descname">WebsocketsCtrlBase</code><span class="sig-paren">(</span><em>use_in_message_queue</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/krait/websockets.html#WebsocketsCtrlBase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#krait.websockets.WebsocketsCtrlBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Base class responsible for handling Websockets communication.
Subclass it to add behavior.</p>
<dl class="method">
<dt id="krait.websockets.WebsocketsCtrlBase.on_start">
<code class="descname">on_start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/krait/websockets.html#WebsocketsCtrlBase.on_start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#krait.websockets.WebsocketsCtrlBase.on_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by Krait when the controller is ready to start. This is running on the main thread.
Do not perform expensive initialization here.</p>
</dd></dl>

<dl class="method">
<dt id="krait.websockets.WebsocketsCtrlBase.on_thread_start">
<code class="descname">on_thread_start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/krait/websockets.html#WebsocketsCtrlBase.on_thread_start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#krait.websockets.WebsocketsCtrlBase.on_thread_start" title="Permalink to this definition">¶</a></dt>
<dd><p>The thread&#8217;s target.
Started by the controller&#8217;s on_start() method.
Override this to add behavior to your controller.</p>
</dd></dl>

<dl class="method">
<dt id="krait.websockets.WebsocketsCtrlBase.on_in_message">
<code class="descname">on_in_message</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/krait/websockets.html#WebsocketsCtrlBase.on_in_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#krait.websockets.WebsocketsCtrlBase.on_in_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by Krait (indirectly) when a new message arrives from the client.
By default adds the message to the message queue.
Override this if the controller is not configured to use messages queues.
:param message: the new message</p>
</dd></dl>

<dl class="method">
<dt id="krait.websockets.WebsocketsCtrlBase.on_in_message_internal">
<code class="descname">on_in_message_internal</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/krait/websockets.html#WebsocketsCtrlBase.on_in_message_internal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#krait.websockets.WebsocketsCtrlBase.on_in_message_internal" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by Krait (directly) when a new message arrives from the client.
This only acquires the lock, then calls on_in_message(message).
:param message: the new message</p>
</dd></dl>

<dl class="method">
<dt id="krait.websockets.WebsocketsCtrlBase.pop_in_message">
<code class="descname">pop_in_message</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/krait/websockets.html#WebsocketsCtrlBase.pop_in_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#krait.websockets.WebsocketsCtrlBase.pop_in_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the first message in the input queue, popping it, if it exists, or None otherwise.
Call this to get messages from the client.
Do not call this if the controller doesn&#8217;t use input message queues.
:return: The value of the first message, or None</p>
</dd></dl>

<dl class="method">
<dt id="krait.websockets.WebsocketsCtrlBase.push_out_message">
<code class="descname">push_out_message</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/krait/websockets.html#WebsocketsCtrlBase.push_out_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#krait.websockets.WebsocketsCtrlBase.push_out_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Call this to send a message. This adds it to the queue; Krait will watch the message queue and send it.
:param message: The message to send.</p>
</dd></dl>

<dl class="method">
<dt id="krait.websockets.WebsocketsCtrlBase.pop_out_message">
<code class="descname">pop_out_message</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/krait/websockets.html#WebsocketsCtrlBase.pop_out_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#krait.websockets.WebsocketsCtrlBase.pop_out_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the first message in the output queue, popping it, if it exists, or None otherwise.
Called by Krait to check on messages to send.
:return: The value of the first message, or None</p>
</dd></dl>

<dl class="method">
<dt id="krait.websockets.WebsocketsCtrlBase.on_stop">
<code class="descname">on_stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/krait/websockets.html#WebsocketsCtrlBase.on_stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#krait.websockets.WebsocketsCtrlBase.on_stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a flag that tells the controller thread to shut down.
Called by Krait when the WebSockets connection is closing.</p>
</dd></dl>

<dl class="method">
<dt id="krait.websockets.WebsocketsCtrlBase.should_stop">
<code class="descname">should_stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/krait/websockets.html#WebsocketsCtrlBase.should_stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#krait.websockets.WebsocketsCtrlBase.should_stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the shutdown event has been set, or False otherwise.
Call this periodically from the controller thread to check if you should shut down.</p>
</dd></dl>

<dl class="method">
<dt id="krait.websockets.WebsocketsCtrlBase.wait_stopped">
<code class="descname">wait_stopped</code><span class="sig-paren">(</span><em>timeout=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/krait/websockets.html#WebsocketsCtrlBase.wait_stopped"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#krait.websockets.WebsocketsCtrlBase.wait_stopped" title="Permalink to this definition">¶</a></dt>
<dd><p>Joins the controller thread, with an optional timeout.
Called by Krait until the thread has shut down.
:return: True if the thread has shut down, or False otherwise.</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="modules.html" class="btn btn-neutral float-right" title="Modules" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="krait.mvc.html" class="btn btn-neutral" title="krait.mvc module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, TED_996.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>